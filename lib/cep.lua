local states = {
    "AC",
    "AL",
    "AM",
    "AP",
    "BA",
    "CE",
    "DF",
    "ES",
    "GO",
    "MA",
    "MG",
    "MS",
    "MT",
    "PA",
    "PB",
    "PE",
    "PI",
    "PR",
    "RJ",
    "RN",
    "RO",
    "RR",
    "RS",
    "SC",
    "SE",
    "SP",
    "TO"
}

local ranges = {
    {{69900000, 69999999}},
    {{57000000, 57999999}},
    {{69000000, 69299999}, {69400000, 69899999}},
    {{68900000, 68999999}},
    {{40000000, 48999999}},
    {{60000000, 63999999}},
    {{70000000, 72799999}, {73000000, 73699999}},
    {{29000000, 29999999}},
    {{72800000, 72999999}, {73700000, 76799999}},
    {{65000000, 65999999}},
    {{30000000, 39999999}},
    {{79000000, 79999999}},
    {{78000000, 78899999}},
    {{66000000, 68899999}},
    {{58000000, 58999999}},
    {{50000000, 56999999}},
    {{64000000, 64999999}},
    {{80000000, 87999999}},
    {{20000000, 28999999}},
    {{59000000, 59999999}},
    {{76800000, 76999999}},
    {{69300000, 69399999}},
    {{90000000, 99999999}},
    {{88000000, 89999999}},
    {{49000000, 49999999}},
    {{01000000, 19999999}},
    {{77000000, 77999999}}
}

return function(options)
    local state = options.state or math.random(1, #states)
    local formated = options.formated or true

    local rangeSet = ranges[state]
    local range = rangeSet[math.random(1, #rangeSet)]

    local cep = math.random(range[1], range[2])

    if formated then
        return string.format('%s-%s', string.sub(cep, 1, 5), string.sub(cep, 6))
    end

    return cep
end
